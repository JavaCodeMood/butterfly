KISSY.add("gallery/form/1.3/uploader/themes/daogouUploader/index",function(c,b,a){var f="",e=b.all;function d(h){var g=this;d.superclass.constructor.call(g,h)}c.extend(d,a,{afterUploaderRender:function(g){g.on("select",function(j){var i=j.files[0];var h=i.name;e(".J_FileName").val(h)})},_getStatusWrapper:function(g){return g&&g.children(".J_FileStatus")||e("")},_waitingHandler:function(g){},_startHandler:function(n){var p=this,k=n.uploader,m=n.index,l=p.get("queue"),h=k.get("type"),g=n.file,i=e(".J_ProgressBar_"+n.id);p._showMsg(g,".J_UploadingMsg");if(h=="ajax"||h=="flash"){var o=p.get("oPlugin").progressBar,j;if(o){j=new o(i,{width:p.get("progressBarWidth")});j.on("change",function(q){if(q.value==100){c.later(function(){p._showMsg(g,".J_SuccessMsg")},200)}});j.render()}l.updateFile(m,{progressBar:j})}},_progressHandler:function(j){var h=j.file,g=j.loaded,i=j.total,l=Math.ceil((g/i)*100),k=h.progressBar;if(!k){return false}k.set("value",l)},_successHandler:function(h){var g=h.file;var i=g.progressBar;i.set("value",100)},_errorHandler:function(g){var h=g.msg,i=g.id;e(".J_ErrorMsg_"+i).html(h);self._showMsg(g.file,".J_ErrorMsg")},_showMsg:function(h,i){var g=e(h.target);g.all(".status-msg").hide();g.all(i).show()}},{ATTRS:{name:{value:"daogouUploader"},cssUrl:{value:"gallery/form/1.3/uploader/themes/daogouUploader/style.css"},fileTpl:{value:'<div id="queue-file-{id}" class="file-uploading" data-name="{name}"><div class="J_UploadingMsg status-msg"><p class="file-name">{name}</p><p class="tx">\u6b63\u5728\u90e8\u7f72\uff0c\u8bf7\u7a0d\u5019...</p><div class="J_ProgressBar_{id} f-l uploader-progress"><img class="loading" src="http://img01.taobaocdn.com/tps/i1/T1F5tVXjRfXXXXXXXX-16-16.gif" alt="loading" /></div></div><div class="J_SuccessMsg status-msg"><i class="i-success"></i><div class="tx"><b>\u4e0a\u4f20\u6210\u529f!</b></div><div class="J_ErrorMsg status-msg"> <i class="i-tip"></i> <div class="tx"><b>\u4e0a\u4f20\u5931\u8d25\uff1a<i class="dg-light J_ErrorMsg_{id}"></i></b></div></div></div>'},plugins:{value:["progressBar"]},progressBarWidth:{value:400}}});return d},{requires:["node","../../theme"]});
